(function(){var STK=(function(){var that={};var errorList=[];that.inc=function(ns,undepended){return true};that.register=function(ns,maker){var NSList=ns.split(".");var step=that;var k=null;while(k=NSList.shift()){if(NSList.length){if(step[k]===undefined){step[k]={}}step=step[k]}else{if(step[k]===undefined){try{step[k]=maker(that)}catch(exp){errorList.push(exp)}}}}};that.regShort=function(sname,sfun){if(that[sname]!==undefined){throw"["+sname+"] : short : has been register"}that[sname]=sfun};that.IE=/msie/i.test(navigator.userAgent);that.E=function(id){if(typeof id==="string"){return document.getElementById(id)}else{return id}};that.C=function(tagName){var dom;tagName=tagName.toUpperCase();if(tagName=="TEXT"){dom=document.createTextNode("")}else{if(tagName=="BUFFER"){dom=document.createDocumentFragment()}else{dom=document.createElement(tagName)}}return dom};that.log=function(str){errorList.push("["+((new Date()).getTime()%100000)+"]: "+str)};that.getErrorLogInformationList=function(n){return errorList.splice(0,n||errorList.length)};return that})();$Import=STK.inc;STK.register("core.evt.addEvent",function($){return function(sNode,sEventType,oFunc){var oElement=$.E(sNode);if(oElement==null){return false}sEventType=sEventType||"click";if((typeof oFunc).toLowerCase()!="function"){return}if(oElement.addEventListener){oElement.addEventListener(sEventType,oFunc,false)}else{if(oElement.attachEvent){oElement.attachEvent("on"+sEventType,oFunc)}else{oElement["on"+sEventType]=oFunc}}return true}});STK.register("core.arr.isArray",function($){return function(o){return Object.prototype.toString.call(o)==="[object Array]"}});STK.register("core.evt.custEvent",function($){var _custAttr="__custEventKey__",_custKey=1,_custCache={},_findObj=function(obj,type){var _key=(typeof obj=="number")?obj:obj[_custAttr];return(_key&&_custCache[_key])&&{obj:(typeof type=="string"?_custCache[_key][type]:_custCache[_key]),key:_key}};return{define:function(obj,type){if(obj&&type){var _key=(typeof obj=="number")?obj:obj[_custAttr]||(obj[_custAttr]=_custKey++),_cache=_custCache[_key]||(_custCache[_key]={});type=[].concat(type);for(var i=0;i<type.length;i++){_cache[type[i]]||(_cache[type[i]]=[])}return _key}},undefine:function(obj,type){if(obj){var _key=(typeof obj=="number")?obj:obj[_custAttr];if(_key&&_custCache[_key]){if(type){type=[].concat(type);for(var i=0;i<type.length;i++){if(type[i] in _custCache[_key]){delete _custCache[_key][type[i]]}}}else{delete _custCache[_key]}}}},add:function(obj,type,fn,data){if(obj&&typeof type=="string"&&fn){var _cache=_findObj(obj,type);if(!_cache||!_cache.obj){throw"custEvent ("+type+") is undefined !"}_cache.obj.push({fn:fn,data:data});return _cache.key}},once:function(obj,type,fn,data){if(obj&&typeof type=="string"&&fn){var _cache=_findObj(obj,type);if(!_cache||!_cache.obj){throw"custEvent ("+type+") is undefined !"}_cache.obj.push({fn:fn,data:data,once:true});return _cache.key}},remove:function(obj,type,fn){if(obj){var _cache=_findObj(obj,type),_obj,index;if(_cache&&(_obj=_cache.obj)){if($.core.arr.isArray(_obj)){if(fn){var i=0;while(_obj[i]){if(_obj[i].fn===fn){break}i++}_obj.splice(i,1)}else{_obj.splice(0,_obj.length)}}else{for(var i in _obj){_obj[i]=[]}}return _cache.key}}},fire:function(obj,type,args){if(obj&&typeof type=="string"){var _cache=_findObj(obj,type),_obj;if(_cache&&(_obj=_cache.obj)){if(!$.core.arr.isArray(args)){args=args!=undefined?[args]:[]}for(var i=_obj.length-1;i>-1&&_obj[i];i--){var fn=_obj[i].fn;var isOnce=_obj[i].once;if(fn&&fn.apply){try{fn.apply(obj,[{type:type,data:_obj[i].data}].concat(args));if(isOnce){_obj.splice(i,1)}}catch(e){$.log("[error][custEvent]"+e.message)}}}return _cache.key}}},destroy:function(){_custCache={};_custKey=1}}});STK.register("core.evt.removeEvent",function($){return function(el,evType,func,useCapture){var _el=$.E(el);if(_el==null){return false}if(typeof func!="function"){return false}if(_el.removeEventListener){_el.removeEventListener(evType,func,useCapture)}else{if(_el.detachEvent){_el.detachEvent("on"+evType,func)}else{_el["on"+evType]=null}}return true}});STK.register("core.util.getUniqueKey",function($){var _loadTime=(new Date()).getTime().toString(),_i=1;return function(){return _loadTime+(_i++)}});STK.register("http://tjs.sjs.sinajs.cn/open/thirdpart/js/frame/core.str.trim",function($){return function(str){if(typeof str!=="string"){throw"trim need a string as parameter"}var len=str.length;var s=0;var reg=/(\u3000|\s|\t|\u00A0)/;while(s<len){if(!reg.test(str.charAt(s))){break}s+=1}while(len>s){if(!reg.test(str.charAt(len-1))){break}len-=1}return str.slice(s,len)}});STK.register("core.json.jsonToStr",function($){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}return function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}});STK.register("core.json.strToJson",function($){var at,ch,escapee={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},text,error=function(m){throw {name:"SyntaxError",message:m,at:at,text:text}},next=function(c){if(c&&c!==ch){error("Expected '"+c+"' instead of '"+ch+"'")}ch=text.charAt(at);at+=1;return ch},number=function(){var number,string="";if(ch==="-"){string="-";next("-")}while(ch>="0"&&ch<="9"){string+=ch;next()}if(ch==="."){string+=".";while(next()&&ch>="0"&&ch<="9"){string+=ch}}if(ch==="e"||ch==="E"){string+=ch;next();if(ch==="-"||ch==="+"){string+=ch;next()}while(ch>="0"&&ch<="9"){string+=ch;next()}}number=+string;if(isNaN(number)){error("Bad number")}else{return number}},string=function(){var hex,i,string="",uffff;if(ch==='"'){while(next()){if(ch==='"'){next();return string}else{if(ch==="\\"){next();if(ch==="u"){uffff=0;for(i=0;i<4;i+=1){hex=parseInt(next(),16);if(!isFinite(hex)){break}uffff=uffff*16+hex}string+=String.fromCharCode(uffff)}else{if(typeof escapee[ch]==="string"){string+=escapee[ch]}else{break}}}else{string+=ch}}}}error("Bad string")},white=function(){while(ch&&ch<=" "){next()}},word=function(){switch(ch){case"t":next("t");next("r");next("u");next("e");return true;case"f":next("f");next("a");next("l");next("s");next("e");return false;case"n":next("n");next("u");next("l");next("l");return null}error("Unexpected '"+ch+"'")},value,array=function(){var array=[];if(ch==="["){next("[");white();if(ch==="]"){next("]");return array}while(ch){array.push(value());white();if(ch==="]"){next("]");return array}next(",");white()}}error("Bad array")},object=function(){var key,object={};if(ch==="{"){next("{");white();if(ch==="}"){next("}");return object}while(ch){key=string();white();next(":");if(Object.hasOwnProperty.call(object,key)){error('Duplicate key "'+key+'"')}object[key]=value();white();if(ch==="}"){next("}");return object}next(",");white()}}error("Bad object")};value=function(){white();switch(ch){case"{":return object();case"[":return array();case'"':return string();case"-":return number();default:return ch>="0"&&ch<="9"?number():word()}};return function(source,reviver){var result;text=source;at=0;ch=" ";result=value();white();if(ch){error("Syntax error")}return typeof reviver==="function"?(function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}({"":result},"")):result}});STK.register("core.obj.parseParam",function($){return function(oSource,oParams,isown){var key,obj={};oParams=oParams||{};for(key in oSource){obj[key]=oSource[key];if(oParams[key]!=null){if(isown){if(oSource.hasOwnProperty[key]){obj[key]=oParams[key]}}else{obj[key]=oParams[key]}}}return obj}});STK.register("http://tjs.sjs.sinajs.cn/open/thirdpart/js/frame/common.message.xd",function($){var SERVER_LISETENER_NAME="APP_XD_SERVER";var CLIENT_LISETENER_NAME="APP_XD_CLINET";var url=document.location.href;return function(target,type,funName){type=type||"server";target=target||window;CLIENT_LISETENER_NAME=funName||CLIENT_LISETENER_NAME;var that={};var callback=callback||function(){};function messageHanlder(oEvt){oEvt=oEvt||window.event;var data=unescape(oEvt.data);var args=$.core.json.strToJson(data);args.origin=oEvt.origin||url;callback&&typeof callback=="function"&&callback(args)}if(window.postMessage){$.core.evt.addEvent(window,"message",messageHanlder)}else{var xdFunName;if(type=="server"){xdFunName=SERVER_LISETENER_NAME}else{window.name=window.name||CLIENT_LISETENER_NAME;xdFunName=window.name}window.navigator[xdFunName]=function(json){messageHanlder(json)}}function sendMessage(json){var data=$.core.json.jsonToStr(json);data=escape(data);if(window.postMessage){target.postMessage(data,"*")}else{data={data:data,origin:url};var xdFunName;if(type=="server"){xdFunName=CLIENT_LISETENER_NAME}else{xdFunName=SERVER_LISETENER_NAME}try{window.navigator[xdFunName]&&window.navigator[xdFunName](data)}catch(e){}}}that.sendMessage=sendMessage;that.receiveMessage=function(oCallback){callback=oCallback};return that}});if(typeof JSON!=="object"){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var cx,escapable,gap,indent,meta,rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());var addEvent=STK.core.evt.addEvent,removeEvent=STK.core.evt.removeEvent,cEvt=STK.core.evt.custEvent;var XD=STK.common.message.xd(parent,"iframe");XD.receiveMessage(messageHanlder);var size,timer,auto=true;var cbkList={};var event={};function messageHanlder(args){var cid=args.cid||"";if(cid&&cid=="_EVENT_"){cEvt.fire(event,args.call,args.data)}else{if(cid&&cbkList[cid]&&typeof cbkList[cid]=="function"){if(args.call&&(args.call=="deliverAddress:default"||args.call=="deliverAddress:change"||args.call=="weiboRun")){try{args.data=JSON.parse(args.data)}catch(e){if(/^\{.*\}$/.test(args.data)){args.data=eval("("+args.data+")")}}if(args.data==""){args.data=null}}cbkList[cid](args.data)}}}function sendIframeSize(){var current={cmd:"resize",width:document.body.clientWidth,height:document.body.clientHeight};if(size==null){size={cmd:"resize",width:current.width,height:current.height};XD.sendMessage(size)}if(size!=null&&typeof size.width!="undefined"&&typeof size.height!="undefined"&&(size.width!=current.width||size.height!=current.height)){XD.sendMessage(current)}}timer=setInterval(sendIframeSize,1000);function init(){if(auto==true){addEvent(window,"load",sendIframeSize);addEvent(document.body,"DOMSubtreeModified",sendIframeSize);addEvent(document.body,"DOMNodeInserted",sendIframeSize);addEvent(document.body,"DOMNodeRemoved",sendIframeSize)}else{removeEvent(window,"load",sendIframeSize);removeEvent(document.body,"DOMSubtreeModified",sendIframeSize);removeEvent(document.body,"DOMNodeInserted",sendIframeSize);removeEvent(document.body,"DOMNodeRemoved",sendIframeSize)}}init();function log(msg){window.console&&typeof window.console.log=="function"&&window.console.log(msg)}if(typeof window.App=="undefined"){window.App={}}window.App.setPageHeight=function(height){clearInterval(timer);auto=false;init();XD.sendMessage({cmd:"resize",width:"",height:height,force:"true"})};window.App.scrollTo=function(num){XD.sendMessage({cmd:"scrollTo",param:num})};window.App.scrollToTop=function(status){status=status||"";App.scrollTo(status)};window.App.oauth=function(options){App.AuthDialog.show(options)};window.App.trigger=function(cmd,param,callback){log("trigger : "+cmd);if(cmd==="setPageHeight"){App.setPageHeight(param);return}var args={cmd:cmd};if((typeof param).toUpperCase()==="FUNCTION"){callback=param;param=undefined;var cid=STK.core.util.getUniqueKey();callback&&(cbkList[cid]=callback);args.cid=cid}else{args.param=param}XD.sendMessage(args)};window.App.on=function(cmd,fn){log("on : "+cmd);cEvt.define(event,cmd);cEvt.add(event,cmd,function(evt,data){var _data=data.length?data[0]:data;fn&&fn(_data)})};window.App.off=function(cmd,fn){log("off : "+cmd);cEvt.remove(event,cmd,fn)}})();(function(){function a(c){var b,d;var e;if(c){e=c.document}else{e=document}if(e.compatMode==="CSS1Compat"){b=e.documentElement.clientWidth;d=e.documentElement.clientHeight}else{if(self.innerHeight){if(c){e=c.self}else{e=self}b=e.innerWidth;d=e.innerHeight}else{if(e.documentElement&&e.documentElement.clientHeight){b=e.documentElement.clientWidth;d=e.documentElement.clientHeight}else{if(e.body){b=e.body.clientWidth;d=e.body.clientHeight}}}}return{width:b,height:d}}window.App=window.App||{};App.AuthDialog={init:function(d){d=d||{};var g="https://api.weibo.com/oauth2/authorize?response_type=token&client_id="+d.client_id+"&redirect_uri="+encodeURIComponent(d.redirect_uri);d.scope&&(g+="&scope="+d.scope);d.display&&(g+="&display="+d.display);d.others&&(g+=d.others);var b="561",e="350";var c="<iframe frameBorder='0' scrolling='no' width='"+b+"' height='"+e+"' allowtransparency='true' src='"+g+"' ></iframe>";var f=document.createElement("div");f.id="authDiv";f.style.width=b+"px";f.style.height=e+"px";f.style.position="absolute";f.style.overflow="hidden";f.style.textAlign="center";f.innerHTML=c;f.style.display="none";document.body.appendChild(f);this.authDiv=f},show:function(f){f=f||{height:120,client_id:"",redirect_uri:""};if(f.client_id==""||typeof f.client_id=="undefined"||f.redirect_uri==""||typeof f.redirect_uri=="undefined"){throw new Error("no client_id or redirect_uri found.")}if(this.authDiv==null){this.init(f)}this.authDiv.style.display="";var e=this.authDiv.offsetWidth;var g=this.authDiv.offsetHeight;var d=a();var c=(d.width-e)/2;var b=(d.height-g)/2;c=c<0?0:c;this.authDiv.style.left=c+"px";this.authDiv.style.top=(f.height||b)+"px"}}})();(function(){var a={"http://tjs.sjs.sinajs.cn/open/thirdpart/js/frame/cashier.alipay.com":"支付宝","http://tjs.sjs.sinajs.cn/open/thirdpart/js/frame/www.tenpay.com":"财付通","http://tjs.sjs.sinajs.cn/open/thirdpart/js/frame/mas.sdo.com":"盛付通（盛大旗下）","http://tjs.sjs.sinajs.cn/open/thirdpart/js/frame/www.yeepay.com":"易宝支付（Yeepay）","http://tjs.sjs.sinajs.cn/open/thirdpart/js/frame/www.99bill.com":"快钱（99bill）","http://tjs.sjs.sinajs.cn/open/thirdpart/js/frame/epay.163.com":"网易宝（网易）"};var h=[];for(var g in a){h.push(g)}h=h.join("|");h=new RegExp("https?://("+h+")","gi");var e=document.documentElement.innerHTML;var j=e.match(h);if(j!=null&&j.length>0){for(var d=0,f=j.length;d<f;d++){b(j[d])}}function b(n){var k=n.replace(/https?:\/\//gi,"");var l=new RegExp(n+"[^s\"']+","i");var m=e.match(l);if(m.length>0){n=m[0]}var i="http://api.weibo.com/auth/recordAppAd.jsp?advertiserName="+c(a[k])+"&advertiserUrl="+c(n)+"&appUrl="+c(document.URL);App=App||{};App.adWatchImg=new Image();App.adWatchImg.src=i}function c(i){return encodeURIComponent(i)}})();